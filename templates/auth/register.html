{% extends 'base_auth.html' %}
{% load i18n %}
{% load settings_tags %}
{% get_site_setting 'site_name' 'VinFlow' as site_name %}
{% get_site_setting 'site_logo' '' as site_logo %}
{% get_site_setting 'site_description' 'Professional SMM Panel for Social Media Marketing' as site_description %}

{% block title %}{% trans "Sign Up" %} - {{ site_name }}{% endblock %}

{% block content %}
<div class="auth-split-container">
    <!-- Left Promotional Section -->
    <div class="auth-left-section">
        <div class="auth-left-content">
            <!-- Logo -->
            <div class="mb-8">
                <div class="flex items-center gap-3 mb-4">
                    {% if site_logo %}
                        {% if site_logo|slice:':4' == 'http' or site_logo|slice:':2' == '//' %}
                            <img src="{{ site_logo }}" alt="{{ site_name }}" class="h-12 w-auto">
                        {% else %}
                            <img src="/media/{{ site_logo }}" alt="{{ site_name }}" class="h-12 w-auto">
                        {% endif %}
                    {% else %}
                        <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-xl">{{ site_name|first|upper }}</span>
                        </div>
                    {% endif %}
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">{{ site_name }}</h1>
                        <p class="text-sm text-gray-600">XMPLUS</p>
                    </div>
                </div>
            </div>
            
            <!-- Welcome Message -->
            <div class="mb-8">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">
                    {% trans "Welcome to" %} {{ site_name }}
                </h2>
                <p class="text-lg text-gray-700 leading-relaxed">
                    {% if site_description %}
                        {{ site_description }}
                    {% else %}
                        {% trans "Committed to using multi-source data to help enterprises enhance customer experience" %}
                    {% endif %}
                </p>
            </div>
            
            <!-- Illustration -->
            <div class="auth-illustration">
                <div class="illustration-checkmark"></div>
                <div class="illustration-elements">
                    <!-- Decorative elements -->
                    <div class="illustration-icon" style="top: 10%; left: 10%;">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <path d="M9 9h6v6H9z"/>
                        </svg>
                    </div>
                    <div class="illustration-icon" style="top: 60%; right: 15%;">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                    </div>
                    <div class="illustration-icon" style="bottom: 20%; left: 20%;">
                        <svg width="36" height="36" viewBox="0 0 24 24" fill="#3b82f6" opacity="0.6">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Right Form Section -->
    <div class="auth-right-section">
        <div class="max-w-md w-full mx-auto">
            <!-- Title -->
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2 text-center">
                    {% trans "Create Account" %}
                </h2>
            </div>
            
            <!-- Registration Form -->
            <div class="auth-form-card p-8">
                <form method="post" class="space-y-5">
                    {% csrf_token %}
                    
                    <!-- Username Field -->
                    <div>
                        <input 
                            type="text" 
                            name="username" 
                            required 
                            minlength="3"
                            autocomplete="username"
                            class="auth-input"
                            placeholder="{% trans 'Choose a unique username' %}"
                        >
                        <p class="text-xs text-gray-500 mt-1">{% trans "At least 3 characters" %}</p>
                    </div>
                    
                    <!-- Email Field -->
                    <div>
                        <input 
                            type="email" 
                            name="email" 
                            required
                            autocomplete="email"
                            class="auth-input"
                            placeholder="{% trans 'Enter your email address' %}"
                        >
                    </div>
                    
                    <!-- Password Field -->
                    <div>
                        <div class="relative">
                            <input 
                                type="password" 
                                name="password" 
                                id="password"
                                required 
                                minlength="8"
                                autocomplete="new-password"
                                class="auth-input pr-10"
                                placeholder="{% trans 'Please enter password (6 to 14 digits or letters)' %}"
                            >
                            <button 
                                type="button" 
                                class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none"
                                onclick="togglePassword('password')"
                            >
                                <svg id="password-eye" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                                <svg id="password-eye-off" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
                                </svg>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">{% trans "Use a strong password" %}</p>
                    </div>
                    
                    <!-- Confirm Password Field -->
                    <div>
                        <div class="relative">
                            <input 
                                type="password" 
                                name="password_confirm" 
                                id="password_confirm"
                                required 
                                minlength="8"
                                autocomplete="new-password"
                                class="auth-input pr-10"
                                placeholder="{% trans 'Re-enter your password' %}"
                            >
                            <button 
                                type="button" 
                                class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none"
                                onclick="togglePassword('password_confirm')"
                            >
                                <svg id="password_confirm-eye" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                                <svg id="password_confirm-eye-off" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Referral Code Field -->
                    <div>
                        <input 
                            type="text" 
                            name="referral_code"
                            class="auth-input"
                            placeholder="{% trans 'Enter referral code if you have one (Optional)' %}"
                        >
                    </div>
                    
                    <!-- Terms Agreement -->
                    <div class="flex items-start">
                        <input 
                            id="terms" 
                            name="terms" 
                            type="checkbox" 
                            required
                            class="auth-checkbox mt-1"
                        >
                        <label for="terms" class="ml-2 block text-sm text-gray-700">
                            {% trans "I have read and agree to" %} 
                            <a href="#" class="auth-link">{% trans "Service Agreement" %}</a> 
                            {% trans "and" %} 
                            <a href="#" class="auth-link">{% trans "Privacy Policy" %}</a>
                        </label>
                    </div>
                    
                    <!-- Register Button -->
                    <button type="submit" class="auth-btn-primary">
                        {% trans "Create Account" %}
                    </button>
                </form>
                
                <!-- Login Link -->
                <div class="mt-6 text-center">
                    <p class="text-sm text-gray-600">
                        {% trans "Already have an account?" %} 
                        <a href="{% url 'login' %}" class="auth-link font-medium">
                            {% trans "Login immediately" %}
                        </a>
                    </p>
                </div>
                
                
                <!-- Google OAuth Button -->
                <a href="{% url 'google_login' %}" class="google-oauth-btn">
                    <svg class="google-oauth-btn-icon" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    <span>{% trans "Continue with Google" %}</span>
                </a>
            </div>
        </div>
    </div>
</div>

<script>
function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    const eye = document.getElementById(inputId + '-eye');
    const eyeOff = document.getElementById(inputId + '-eye-off');
    
    if (input.type === 'password') {
        input.type = 'text';
        eye.classList.add('hidden');
        eyeOff.classList.remove('hidden');
    } else {
        input.type = 'password';
        eye.classList.remove('hidden');
        eyeOff.classList.add('hidden');
    }
}
</script>
{% endblock %}
