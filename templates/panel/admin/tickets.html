{% extends 'panel/admin/base.html' %}
{% load i18n %}

{% block title %}{% trans "Tickets Management" %} - VinFlow{% endblock %}

{% block admin_content %}
<div class="space-y-6">
    <h1 class="text-3xl font-bold">{% trans "Tickets Management" %}</h1>
    
    <!-- Filters -->
    <div class="card-glass rounded-xl p-4">
        <div class="flex gap-2">
            <a href="{% url 'admin_tickets' %}" class="px-4 py-2 rounded-lg {% if not status_filter %}bg-purple-600{% else %}bg-slate-700 hover:bg-slate-600{% endif %} text-sm">
                {% trans "All" %}
            </a>
            <a href="?status=open" class="px-4 py-2 rounded-lg {% if status_filter == 'open' %}bg-purple-600{% else %}bg-slate-700 hover:bg-slate-600{% endif %} text-sm">
                {% trans "Open" %}
            </a>
            <a href="?status=in_progress" class="px-4 py-2 rounded-lg {% if status_filter == 'in_progress' %}bg-purple-600{% else %}bg-slate-700 hover:bg-slate-600{% endif %} text-sm">
                {% trans "In Progress" %}
            </a>
            <a href="?status=resolved" class="px-4 py-2 rounded-lg {% if status_filter == 'resolved' %}bg-purple-600{% else %}bg-slate-700 hover:bg-slate-600{% endif %} text-sm">
                {% trans "Resolved" %}
            </a>
        </div>
    </div>
    
    <!-- Tickets List -->
    <div class="card-glass rounded-xl p-6">
        <div class="space-y-4">
            {% for ticket in tickets %}
            <a href="{% url 'ticket_detail' ticket.id %}" class="block border border-slate-700 rounded-lg p-4 hover:border-purple-500 transition">
                <div class="flex justify-between items-start">
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-2">
                            <h3 class="font-semibold text-lg">{{ ticket.subject }}</h3>
                            <span class="px-2 py-1 rounded text-xs
                                {% if ticket.status == 'resolved' %}bg-green-900/50 text-green-400
                                {% elif ticket.status == 'in_progress' %}bg-yellow-900/50 text-yellow-400
                                {% else %}bg-blue-900/50 text-blue-400{% endif %}">
                                {{ ticket.status|title }}
                            </span>
                            <span class="px-2 py-1 rounded text-xs bg-slate-700 text-gray-300">
                                {{ ticket.priority|title }}
                            </span>
                        </div>
                        <p class="text-sm text-gray-400">{% trans "User" %}: {{ ticket.user.username }} | {% trans "Created" %}: {{ ticket.created_at|date:"M d, Y H:i" }}</p>
                    </div>
                </div>
            </a>
            {% empty %}
            <p class="text-gray-400 text-center py-8">{% trans "No tickets found" %}</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}

