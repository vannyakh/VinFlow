{% load i18n %}
<div class="space-y-3">
    <!-- Status Badge -->
    <div>
        <span class="px-3 py-1.5 rounded-lg text-sm font-medium inline-flex items-center gap-2
            {% if order.status == 'Completed' %}bg-green-900/50 text-green-400 border border-green-800/50
            {% elif order.status == 'Processing' or order.status == 'In Progress' %}bg-yellow-900/50 text-yellow-400 border border-yellow-800/50
            {% elif order.status == 'Pending' %}bg-blue-900/50 text-blue-400 border border-blue-800/50
            {% elif order.status == 'Canceled' or order.status == 'Refunded' %}bg-red-900/50 text-red-400 border border-red-800/50
            {% else %}bg-slate-700/50 text-gray-400 border border-slate-600/50{% endif %}" 
            id="status-{{ order.id }}">
            {% if order.status == 'Completed' %}
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                </svg>
            {% elif order.status == 'Processing' or order.status == 'In Progress' %}
                <svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            {% elif order.status == 'Pending' %}
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                </svg>
            {% endif %}
            {{ order.status }}
        </span>
    </div>
    
    <!-- Progress Information -->
    {% if order.status != 'Pending' and order.status != 'Canceled' %}
    <div class="space-y-2">
        <div class="flex justify-between items-center text-sm">
            <span class="text-gray-400">{% trans "Progress" %}</span>
            <span class="text-gray-300 font-medium">
                {% if order.quantity > 0 %}
                    {% widthratio order.start_count order.quantity 100 %}%
                {% else %}
                    0%
                {% endif %}
            </span>
        </div>
        
        <!-- Progress Bar -->
        <div class="w-full bg-slate-700 rounded-full h-2 overflow-hidden">
            {% if order.quantity > 0 %}
                {% widthratio order.start_count order.quantity 100 as progress_percent %}
            {% else %}
                {% widthratio 0 1 100 as progress_percent %}
            {% endif %}
            <div class="h-full bg-gradient-to-r from-cyan-500 to-purple-500 transition-all duration-500 ease-out" 
                 style="width: {{ progress_percent }}%">
            </div>
        </div>
        
        <!-- Stats Grid -->
        <div class="grid grid-cols-3 gap-3 pt-2">
            <div class="bg-slate-800/50 rounded-lg p-3">
                <p class="text-xs text-gray-400 mb-1">{% trans "Start Count" %}</p>
                <p class="text-lg font-bold text-cyan-400" id="start-{{ order.id }}">{{ order.start_count }}</p>
            </div>
            <div class="bg-slate-800/50 rounded-lg p-3">
                <p class="text-xs text-gray-400 mb-1">{% trans "Remains" %}</p>
                <p class="text-lg font-bold text-yellow-400" id="remains-{{ order.id }}">{{ order.remains }}</p>
            </div>
            <div class="bg-slate-800/50 rounded-lg p-3">
                <p class="text-xs text-gray-400 mb-1">{% trans "Total" %}</p>
                <p class="text-lg font-bold text-gray-300">{{ order.quantity }}</p>
            </div>
        </div>
    </div>
    {% else %}
    <!-- Simple display for Pending/Canceled orders -->
    <div class="flex gap-4 text-sm">
        <div>
            <span class="text-gray-400">{% trans "Start Count" %}:</span>
            <span class="ml-2 font-semibold text-cyan-400" id="start-{{ order.id }}">{{ order.start_count }}</span>
        </div>
        <div>
            <span class="text-gray-400">{% trans "Remains" %}:</span>
            <span class="ml-2 font-semibold text-yellow-400" id="remains-{{ order.id }}">{{ order.remains }}</span>
        </div>
    </div>
    {% endif %}
</div>

